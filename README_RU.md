# Telegram Бот для Комьюнити

Telegram бот для закрытого международного комьюнити с системой обмена ресурсами и балльной системой.

## Возможности

- **Регистрация пользователей**: Сбор информации о пользователе (имя, города, о себе, Instagram)
- **Раздел "Друзья"**: Просмотр участников комьюнити по городам
- **Раздел "Ресурсы"**: Просмотр и обмен ресурсами по категориям:
  - Недвижимость
  - Автомобили
  - Самолеты
  - Яхты и лодки
  - Оборудование
  - Навыки и знания
  - Опыт и время
  - Уникальные возможности
  - Произведения искусства
  - Личные знакомства с определенными кругами
- **Система лотов**: Управление тем, чем делитесь и что ищете
- **База открытых ресурсов**: Общие карты, ссылки и проверенные специалисты
- **Балльная система**: Отслеживание вклада участников
- **Админ-панель**: Управление пользователями, ресурсами и баллами

## Установка

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd bottelegram
```

2. Установите зависимости:
```bash
pip install -r requirements.txt
```

3. Настройте переменные окружения:
```bash
cp .env.example .env
```

Отредактируйте файл `.env` и добавьте свою конфигурацию:
- `BOT_TOKEN`: Токен вашего бота от [@BotFather](https://t.me/BotFather)
- `ADMIN_IDS`: ID администраторов через запятую
- `CHANNEL_USERNAME`: Имя канала комьюнити (опционально)
- `DATABASE_PATH`: Путь к файлу базы данных SQLite (по умолчанию: bot_database.db)

## Получение токена бота

1. Откройте Telegram и найдите [@BotFather](https://t.me/BotFather)
2. Отправьте команду `/newbot`
3. Следуйте инструкциям для создания бота
4. Скопируйте токен и вставьте его в файл `.env`

## Получение вашего User ID

Чтобы назначить себя администратором, вам нужен ваш Telegram user ID:

1. Найдите бота [@userinfobot](https://t.me/userinfobot) в Telegram
2. Запустите бота и он отправит вам ваш user ID
3. Добавьте этот ID в `ADMIN_IDS` в файле `.env`

## Запуск бота

Простой способ:
```bash
python run.py
```

Или через модуль Python:
```bash
python -m bot.main
```

## Структура проекта

```
bottelegram/
├── bot/
│   ├── __init__.py
│   ├── main.py              # Основной файл бота
│   ├── config.py            # Настройки конфигурации
│   ├── database.py          # Работа с базой данных
│   ├── keyboards.py         # Клавиатуры бота
│   └── handlers/            # Обработчики сообщений
│       ├── __init__.py
│       ├── registration.py  # Регистрация пользователей
│       ├── menu.py          # Главное меню
│       ├── friends.py       # Раздел "Друзья"
│       ├── resources.py     # Раздел "Ресурсы"
│       ├── lots.py          # Раздел "Лоты"
│       ├── open_resources.py # Открытые ресурсы
│       └── admin.py         # Админ-панель
├── requirements.txt         # Зависимости Python
├── .env.example            # Шаблон переменных окружения
├── .gitignore
├── run.py                  # Файл запуска
├── README.md               # Документация (English)
└── README_RU.md            # Документация (Русский)
```

## База данных

Бот использует SQLite с следующими таблицами:

- **users**: Профили пользователей с баллами
- **resources**: Ресурсы комьюнити по категориям
- **lots**: Что пользователи делятся и ищут
- **open_resources**: Общие карты, ссылки и специалисты

База данных автоматически создается при первом запуске.

## Функции администратора

Администраторы имеют доступ к дополнительным функциям:

1. **Управление пользователями**: Просмотр всех зарегистрированных пользователей
2. **Управление баллами**: Изменение баллов пользователей
3. **Управление открытыми ресурсами**: Добавление общих ресурсов (карты, ссылки, специалисты)
4. **Управление ресурсами**: Модерация ресурсов пользователей (в разработке)

## Использование

### Для пользователей

1. Запустите бота командой `/start`
2. Пройдите регистрацию
3. Используйте меню для:
   - Просмотра друзей по городам
   - Изучения ресурсов по категориям
   - Управления своими лотами (что делитесь/ищете)
   - Доступа к базе открытых ресурсов
   - Просмотра профиля

### Для администраторов

1. Откройте Админ-панель из главного меню
2. Управляйте пользователями и их баллами
3. Добавляйте открытые ресурсы для комьюнити
4. Следите за добавлением ресурсов

## Команды бота

- `/start` - Запустить бота и зарегистрироваться (или вернуться в главное меню)

## Балльная система

- Баллы начисляются за предоставление ресурсов или услуг
- Каждое действие равно одному баллу
- Администраторы могут вручную изменять баллы через админ-панель
- Баллы отображаются в профилях пользователей

## Интеграция с каналом

Бот может быть связан с каналом комьюнити для:
- Новостей и обновлений
- Портретов резидентов
- Дайджестов обменов
- Объявлений о новых ресурсах

Настройте `CHANNEL_USERNAME` в `.env` для активации этой функции.

## Техническая информация

- **Фреймворк**: aiogram 3.4.1
- **База данных**: SQLite с aiosqlite
- **Версия Python**: 3.8+
- **Асинхронность**: Полная поддержка async/await

## Разработка

Бот структурирован для легкого расширения:

1. Добавляйте новые обработчики в `bot/handlers/`
2. Создавайте новые клавиатуры в `bot/keyboards.py`
3. Добавляйте методы базы данных в `bot/database.py`
4. Настраивайте новые функции в `bot/config.py`

## Поддержка

По вопросам обращайтесь к администратору бота.

## Дополнительные возможности для расширения

В будущем можно добавить:
- Автоматическую загрузку данных из Google Forms
- Систему уведомлений о новых ресурсах
- Поиск по ресурсам
- Рейтинг пользователей
- Историю обменов
- Статистику активности

## Лицензия

Этот проект создан для частного комьюнити. Все права защищены.
